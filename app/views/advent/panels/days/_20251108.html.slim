- stage = local_assigns.fetch(:stage, :part1).to_sym
- primary_action = local_assigns[:primary_action]
- story_texts = Array(local_assigns[:story_texts]).map(&:presence).compact
- puzzle_attempt = (@puzzle_attempt || "").to_s.strip
- puzzle_error = @puzzle_error

- case stage
- when :part1
  section.advent-section
    p.advent-section__text Yoohoo. Come here often? ğŸ˜—
    p.advent-section__text Here is a place where adventures ventures, travels unravel, and stars startle (huh?) All that is wonderful in the world can be found when you press the following button ğŸ‘‡

    - if primary_action.present?
      .advent-action
        == primary_action
- when :part2
  section.advent-section
    p.advent-section__text Wah. You have gathered one star from the check-in â­ï¸
    p.advent-section__text ...
    - if story_texts.any?
      - story_texts.each do |story|
        p.advent-section__story = story
    - else
      p.advent-section__story The story will be unveiled soon. Stay tuned!

    .advent-action
      = button_to "what happens?", advent_solve_puzzle_path(persistent_advent_params), method: :post, params: { auto_complete: true }, class: "advent-button advent-button--ghost", data: { advent_secondary_action: true }

- else
  section.advent-section.advent-done
    p.advent-section__text ...the story will continue tomorrow :) In the meantime, here, have one more star because you are cute ğŸ˜™
    p.advent-section__text â­ï¸
