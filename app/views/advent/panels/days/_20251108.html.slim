- stage = local_assigns.fetch(:stage, :part1).to_sym
- primary_action = local_assigns[:primary_action]
- puzzle_attempt = (@puzzle_attempt || "").to_s.strip
- puzzle_error = @puzzle_error

- case stage
- when :part1
  section.advent-section
    pre.advent-section__text Yoohoo. Welcome to the advent calendar, where adventures ventures, travels unravel, and stars startle (huh?) Every day you come here, you check in:

    - if primary_action.present?
      .advent-action
        == primary_action
- when :part2
  section.advent-section
    p.advent-section__text Wah. You have gathered one star from the check-in ‚≠êÔ∏è! Now, a story:
    p.advent-section__story "Haiya. Another 8pm meeting." Thought Joyce. "Getting in the way of meeting my wonderful, sweet, absolutely-right girlfriend Jenny. What is adulting." As she reflects upon how how hot her girlfrined looks in her volleyball jersey, she plops into the chair and tuned into the meeting. 

    p.advent-section__story As she glanced around, waiting for people to trickle into the virtual meeting room, she felt...something was weird. She looked down at the "superstar! I got my COVID-19 shot" sticker that she was fidgeting with, and realized it's...glowing?

    p.advent-section__story Huh?

    p.advent-section__story Suddenly, there was a great, pulling sensation from the sticker, as it grew larger and larger, until it became a room filled with dizzying current of stars. "...but surly there is a more efficient algorithm for the expansion" was her last coherent thought before she sank deep,  deep into the stars.

    .advent-action
      = button_to "what happens?", advent_solve_puzzle_path(persistent_advent_params), method: :post, params: { auto_complete: true }, class: "advent-button advent-button--ghost", data: { advent_secondary_action: true }

- else
  section.advent-section.advent-done
    p.advent-section__text Well. The story will continue tomorrow :) In the meantime, here, have one more star ‚≠êÔ∏è because you are cute üòô
